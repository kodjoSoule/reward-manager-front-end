<!-- create-reward.component.html -->

<div class="container mt-4 p-4">
  <h3 class="text-primary mb-2">
    Créer une Nouvelle Récompense
    <button
      type="button"
      class="btn-close h3"
      aria-label="Close"
      (click)="closeModal()"
    ></button>
  </h3>

  <!-- Afficher un indicateur de chargement pendant la création -->
  <div *ngIf="loading" class="text-center mb-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Chargement...</span>
    </div>
  </div>

  <form (ngSubmit)="createReward()">
    <!-- Champ pour le montant du repas -->
    <div class="form-group mb-2">
      <label for="diningAmount">Montant du Repas</label>
      <input
        type="number"
        id="diningAmount"
        name="dining_amount"
        class="form-control"
        [(ngModel)]="newReward.dining_amount"
        required
      />
    </div>
    <div class="form-group mb-2">
      <label for="creditCardNumber">creditCardNumber</label>
      <input
        type="text"
        id="creditCardNumber"
        name="credit_card_number"
        class="form-control"
        [(ngModel)]="newReward.credit_card_number"
        required
      />
    </div>

    <!-- Liste déroulante pour choisir le restaurant -->
    <div class="form-group mb-2">
      <label for="merchantNumber">Sélectionner un Restaurant</label>
      <select
        id="merchantNumber"
        name="merchant_number"
        class="form-control"
        [(ngModel)]="newReward.merchant_number"
        required
      >
        <option
          *ngFor="let restaurant of restaurants"
          [value]="restaurant.merchant_number"
        >
          {{ restaurant.name }}
        </option>
      </select>
    </div>
    <!-- Champ pour la date du repas -->
    <div class="form-group mb-2">
      <label for="diningDate">Date du Repas</label>
      <input
        type="date"
        id="diningDate"
        name="diningDate"
        class="form-control"
        [(ngModel)]="newReward.dining_date"
        required
      />
    </div>
    <div class="form-group mb-2">
      <!-- Bouton pour soumettre le formulaire de création -->
      <button type="submit" class="btn btn-primary me-2">
        Créer Récompense
      </button>
      <!-- Bouton pour fermer la modal -->
      <button
        type="button"
        class="btn btn-secondary me-2"
        (click)="closeModal()"
      >
        Fermer
      </button>
    </div>
  </form>
</div>
